{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}Mail{% endblock %}</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="shortcut icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Gmail_icon_%282020%29.svg/2560px-Gmail_icon_%282020%29.svg.png" type="image/x-icon">
        <link rel="stylesheet" href="{% static 'mail/styles.css' %}">
        {% block script %}
        {% endblock %}
    </head>
    <body>  
    <!-- Sidebar -->
    <div id="sidebar">
        <button class="compose-btn" id="compose">
            <i class="fa-solid fa-pencil"></i> <span>Compose</span>
        </button>
        <ul class="list-unstyled">
            <li>
                <i class="fa-solid fa-inbox"></i>
                <a href="#" id="inbox">Inbox</a>
            </li>
            <li>
                <i class="fa-solid fa-share"></i>
                <a href="#" id="sent">Sent</a>
            </li>
            <li>
                <i class="fa-solid fa-box-archive"></i>
                <a href="#" id="archived">Archive</a>
            </li>
        </ul>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-light bg-light px-3 fixed-top">
       {% if request.user.email %}
        <button class="btn btn-outline-secondary" id="toggle-btn">
            <i class="fa-solid fa-list-ul"></i>
        </button>

        <a class="navbar-brand ms-2" href="#">
            <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/logo_gmail_lockup_default_2x_r5.png" alt="Logo not found">
        </a>

        <form class="d-flex mx-auto w-50">
            <div class="search-field">
               <label for="search-icon">
                 <i class="fa-solid fa-magnifying-glass"></i>
               </label>
                <input class="me-2 search-input" type="search"  id="search-icon" placeholder="Search mail">
                <i class="fa-solid fa-sliders"></i>
            </div>
        </form>


        
        <div class="ms-auto dropdown">
        <!-- Profile Button -->
        <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="https://img.freepik.com/premium-vector/man-avatar-profile-picture-isolated-background-avatar-profile-picture-man_1293239-4841.jpg" alt="profile" class="profile-img">
        </a>
        <!-- Dropdown Menu -->
        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-end">
            <li><h6 class="dropdown-header">{{ user.email }}</h6></li>
            <li>
                <img src="https://img.freepik.com/premium-vector/man-avatar-profile-picture-isolated-background-avatar-profile-picture-man_1293239-4841.jpg" alt="profile" class="profile-img">
            </li>
            <li><span class="dropdown-item-text">username</span></li>
            <li><hr class="dropdown-divider"></li>
            <li>
            <a class="dropdown-item" href="{% url 'logout' %}">
                <i class="fa-solid fa-arrow-right-from-bracket"></i>Sign Out
            </a>
            </li>
        </ul>
        </div>
        {% else %}
        <!-- Logo -->
        <a class="navbar-brand" href="#">
            <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/logo_gmail_lockup_default_2x_r5.png" alt="Logo not found">
        </a>
        <!-- Right side button -->
        <div class="ms-auto d-flex">
            <a href="{% url 'login' %}" class="btn btn-outline-primary me-2 login">Login</a>
            <a href="{% url 'register' %}" class="btn btn-primary register">Create Account</a>
        </div>
        {% endif %}
    </nav>
    
    <div class="container">
        {% block body %}
        {% endblock %}
    </div>

    <script>
        // Sidebar toggle functionality
        document.getElementById('toggle-btn').addEventListener('click', function() {
        document.getElementById('sidebar').classList.toggle('active');
        });

    </script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>